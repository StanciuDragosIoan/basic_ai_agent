<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>AI-chan ğŸŒ¶ï¸</title>
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="public/style.css" />
</head>

<body>
    <div class="app">
        <header class="header">
            <div class="avatar">
                <img src="https://media.craiyon.com/2025-10-03/kJ0_1yo3TAy64Xcc6-8JCw.webp" alt="AI-chan chibi" />
            </div>
            <div>
                <h1>AI-chan</h1>
                <p>Your spicy anime assistant</p>
            </div>
        </header>

        <div id="messages" class="messages"></div>
        <div id="scroll-anchor"></div>

        <form id="chat-form" class="input-bar">
            <input id="input" placeholder="Talk to AI-chan..." autocomplete="off" />
            <button type="submit">Send</button>
        </form>
    </div>
<script>
    const form = document.getElementById('chat-form');
    const input = document.getElementById('input');
    const messages = document.getElementById('messages');



        function addMessage(role, text) {
            const bubble = document.createElement('div');
            bubble.className = `bubble ${role}`;
            bubble.textContent = text;
            messages.appendChild(bubble);
            messages.scrollTop = messages.scrollHeight;
        }

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const text = input.value.trim();
            if (!text) return;

        addMessage('user', text);
        input.value = '';

        const res = await fetch('/api/chat', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message: text }),
        });

        const data = await res.json();
        addMessage('bot', data.reply);

    });
        </script>
</body>

</html>
